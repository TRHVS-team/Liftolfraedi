<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Tölfræði fyrir almenning</title>
  <meta name="description" content="Drög að efni fyrir vefinn" />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="Tölfræði fyrir almenning" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Drög að efni fyrir vefinn" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Tölfræði fyrir almenning" />
  
  <meta name="twitter:description" content="Drög að efni fyrir vefinn" />
  

<meta name="author" content="Sigurbjörg Anna Guðnadóttir" />


<meta name="date" content="2020-08-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  

<link rel="next" href="tvíkosta-aðhvarfsgreining.html"/>
<script src="libs/header-attrs-2.2/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="línuleg-aðhvarfsgreining.html"><a href="línuleg-aðhvarfsgreining.html"><i class="fa fa-check"></i><b>1</b> Línuleg aðhvarfsgreining</a>
<ul>
<li class="chapter" data-level="1.1" data-path="línuleg-aðhvarfsgreining.html"><a href="línuleg-aðhvarfsgreining.html#lýsandi-tölfræði"><i class="fa fa-check"></i><b>1.1</b> Lýsandi tölfræði</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="línuleg-aðhvarfsgreining.html"><a href="línuleg-aðhvarfsgreining.html#sækjum-gögnin-og-lögum-til"><i class="fa fa-check"></i><b>1.1.1</b> Sækjum gögnin og lögum til</a></li>
<li class="chapter" data-level="1.1.2" data-path="línuleg-aðhvarfsgreining.html"><a href="línuleg-aðhvarfsgreining.html#dreifing-helstu-breytna"><i class="fa fa-check"></i><b>1.1.2</b> Dreifing helstu breytna</a></li>
<li class="chapter" data-level="1.1.3" data-path="línuleg-aðhvarfsgreining.html"><a href="línuleg-aðhvarfsgreining.html#tafla-1"><i class="fa fa-check"></i><b>1.1.3</b> Tafla 1</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="línuleg-aðhvarfsgreining.html"><a href="línuleg-aðhvarfsgreining.html#líkanagerð"><i class="fa fa-check"></i><b>1.2</b> Líkanagerð</a></li>
<li class="chapter" data-level="1.3" data-path="línuleg-aðhvarfsgreining.html"><a href="línuleg-aðhvarfsgreining.html#emmeans"><i class="fa fa-check"></i><b>1.3</b> Emmeans</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="tvíkosta-aðhvarfsgreining.html"><a href="tvíkosta-aðhvarfsgreining.html"><i class="fa fa-check"></i><b>2</b> Tvíkosta aðhvarfsgreining</a></li>
<li class="chapter" data-level="3" data-path="lif.html"><a href="lif.html"><i class="fa fa-check"></i><b>3</b> Lifunargreining</a>
<ul>
<li class="chapter" data-level="3.1" data-path="lif.html"><a href="lif.html#lif_skod"><i class="fa fa-check"></i><b>3.1</b> Skoðun lifunargagna</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="lif.html"><a href="lif.html#sækjum-gögnin-og-lögum-til-1"><i class="fa fa-check"></i><b>3.1.1</b> Sækjum gögnin og lögum til</a></li>
<li class="chapter" data-level="3.1.2" data-path="lif.html"><a href="lif.html#tökum-létta-skoðun-á-gögnunum"><i class="fa fa-check"></i><b>3.1.2</b> Tökum létta skoðun á gögnunum</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="veldisvísisfallið.html"><a href="veldisvísisfallið.html"><i class="fa fa-check"></i><b>4</b> ### Veldisvísisfallið</a>
<ul>
<li class="chapter" data-level="4.1" data-path="veldisvísisfallið.html"><a href="veldisvísisfallið.html#tafla-1-1"><i class="fa fa-check"></i><b>4.1</b> Tafla 1</a></li>
<li class="chapter" data-level="4.2" data-path="veldisvísisfallið.html"><a href="veldisvísisfallið.html#veldisvísisfallið-1"><i class="fa fa-check"></i><b>4.2</b> Veldisvísisfallið</a></li>
<li class="chapter" data-level="4.3" data-path="veldisvísisfallið.html"><a href="veldisvísisfallið.html#KM"><i class="fa fa-check"></i><b>4.3</b> Kaplan Meier</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="veldisvísisfallið.html"><a href="veldisvísisfallið.html#kaplan-meier-metilinn"><i class="fa fa-check"></i><b>4.3.1</b> Kaplan Meier metilinn</a></li>
<li class="chapter" data-level="4.3.2" data-path="veldisvísisfallið.html"><a href="veldisvísisfallið.html#kaplan-meier-gröf"><i class="fa fa-check"></i><b>4.3.2</b> Kaplan Meier gröf</a></li>
<li class="chapter" data-level="4.3.3" data-path="veldisvísisfallið.html"><a href="veldisvísisfallið.html#log-rank-próf"><i class="fa fa-check"></i><b>4.3.3</b> Log-rank próf</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="veldisvísisfallið.html"><a href="veldisvísisfallið.html#prof_haz"><i class="fa fa-check"></i><b>4.4</b> Hlutfallsleg áhætta</a></li>
<li class="chapter" data-level="4.5" data-path="veldisvísisfallið.html"><a href="veldisvísisfallið.html#cox"><i class="fa fa-check"></i><b>4.5</b> Cox líkanið</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Tölfræði fyrir almenning</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="header">
<h1 class="title">Tölfræði fyrir almenning</h1>
<p class="author"><em>Sigurbjörg Anna Guðnadóttir</em></p>
<p class="date"><em>2020-08-17</em></p>
</div>
<div id="línuleg-aðhvarfsgreining" class="section level1" number="1">
<h1><span class="header-section-number">Chapter 1</span> Línuleg aðhvarfsgreining</h1>
<p>Í línulegri aðhvarfsgreiningu gildir að útkoman þarf að vera línuleg breyta. Það gildir ekki um skýribreyturnar.</p>
<p>Þeir pakkar sem við notum eru:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="línuleg-aðhvarfsgreining.html#cb13-1"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb13-2"><a href="línuleg-aðhvarfsgreining.html#cb13-2"></a><span class="kw">library</span>(epitools)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;epitools&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:survival&#39;:
## 
##     ratetable</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="línuleg-aðhvarfsgreining.html#cb16-1"></a><span class="kw">library</span>(arsenal)</span>
<span id="cb16-2"><a href="línuleg-aðhvarfsgreining.html#cb16-2"></a><span class="kw">library</span>(ggpubr)</span>
<span id="cb16-3"><a href="línuleg-aðhvarfsgreining.html#cb16-3"></a><span class="kw">library</span>(table1)</span></code></pre></div>
<div id="lýsandi-tölfræði" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Lýsandi tölfræði</h2>
<p>Western Collaborative Group Study (WCGS) gagnasafnið er í epitools- pakkanum. Gagnasafnið byggir á rannsókn sem var með meginmarkmið að skoða tengsl persónuleikagerðar og hjartasjúkdóma. Viðfangsefnin voru 3154 karlmenn á aldrinum 39 - 59 ára, þeim var fylgt eftir í allt að 10 ár þangað til þeir fengu hjartasjúkdóm, létust, þeir urðu 70 ára eða eftirfylgni lauk af öðrum ástæðum. Viðfangsefnin komu inn í rannsóknina á árunum 1960-1961. Í þessum kafla og næstu ætlum við að skoða tengsl kólesteróls og reykinga.</p>
<div id="sækjum-gögnin-og-lögum-til" class="section level3" number="1.1.1">
<h3><span class="header-section-number">1.1.1</span> Sækjum gögnin og lögum til</h3>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="línuleg-aðhvarfsgreining.html#cb17-1"></a><span class="kw">data</span>(wcgs)</span>
<span id="cb17-2"><a href="línuleg-aðhvarfsgreining.html#cb17-2"></a>wcgs &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(wcgs)</span>
<span id="cb17-3"><a href="línuleg-aðhvarfsgreining.html#cb17-3"></a></span>
<span id="cb17-4"><a href="línuleg-aðhvarfsgreining.html#cb17-4"></a>wcgs &lt;-<span class="st"> </span>wcgs <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb17-5"><a href="línuleg-aðhvarfsgreining.html#cb17-5"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">agec =</span> age0 <span class="op">-</span><span class="st"> </span><span class="dv">46</span>,</span>
<span id="cb17-6"><a href="línuleg-aðhvarfsgreining.html#cb17-6"></a>         <span class="dt">cholmmol =</span> chol0 <span class="op">/</span><span class="st"> </span><span class="dv">39</span>,</span>
<span id="cb17-7"><a href="línuleg-aðhvarfsgreining.html#cb17-7"></a>         <span class="dt">sbp10 =</span> sbp0 <span class="op">/</span><span class="st"> </span><span class="dv">10</span>,</span>
<span id="cb17-8"><a href="línuleg-aðhvarfsgreining.html#cb17-8"></a>         <span class="dt">dibpat =</span> <span class="kw">factor</span>(dibpat0, <span class="dt">levels =</span> <span class="dv">0</span><span class="op">:</span><span class="dv">1</span>, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;B&quot;</span>, <span class="st">&quot;A&quot;</span>)),</span>
<span id="cb17-9"><a href="línuleg-aðhvarfsgreining.html#cb17-9"></a>         <span class="dt">smoker =</span> <span class="kw">factor</span>(<span class="dv">1</span> <span class="op">*</span><span class="st"> </span>(ncigs0 <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>), <span class="dt">levels =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;No&quot;</span>, <span class="st">&quot;Yes&quot;</span>)), <span class="co"># ATH, sé til hvort ég nota</span></span>
<span id="cb17-10"><a href="línuleg-aðhvarfsgreining.html#cb17-10"></a>         <span class="dt">bmi =</span> (weight0 <span class="op">*</span><span class="st"> </span><span class="fl">0.454</span>) <span class="op">/</span><span class="st"> </span>((height0 <span class="op">*</span><span class="st"> </span><span class="fl">2.54</span>)<span class="op">/</span><span class="dv">100</span>)<span class="op">^</span><span class="dv">2</span>,</span>
<span id="cb17-11"><a href="línuleg-aðhvarfsgreining.html#cb17-11"></a>         <span class="dt">bmiq3 =</span> <span class="kw">cut</span>(bmi, <span class="dt">breaks =</span> <span class="kw">quantile</span>(bmi, <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span><span class="op">/</span><span class="dv">3</span>)), <span class="co"># ATH, veit ekki hvort ég held þessu</span></span>
<span id="cb17-12"><a href="línuleg-aðhvarfsgreining.html#cb17-12"></a>                     <span class="dt">include.lowest =</span> T, <span class="dt">right =</span> F)</span>
<span id="cb17-13"><a href="línuleg-aðhvarfsgreining.html#cb17-13"></a>  )</span>
<span id="cb17-14"><a href="línuleg-aðhvarfsgreining.html#cb17-14"></a></span>
<span id="cb17-15"><a href="línuleg-aðhvarfsgreining.html#cb17-15"></a>wcgs_dat &lt;-<span class="st"> </span>wcgs <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb17-16"><a href="línuleg-aðhvarfsgreining.html#cb17-16"></a><span class="st">  </span><span class="kw">select</span>(id, agec, cholmmol, sbp10, ncigs0, dibpat, bmi, arcus0) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb17-17"><a href="línuleg-aðhvarfsgreining.html#cb17-17"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">complete.cases</span>(.)) </span>
<span id="cb17-18"><a href="línuleg-aðhvarfsgreining.html#cb17-18"></a></span>
<span id="cb17-19"><a href="línuleg-aðhvarfsgreining.html#cb17-19"></a>wcgs_dat<span class="op">$</span>dibpat &lt;-<span class="st"> </span><span class="kw">relevel</span>(wcgs_dat<span class="op">$</span>dibpat, <span class="st">&quot;A&quot;</span>)</span></code></pre></div>
<p>Við búum til nýja aldursbreytu þar sem við erum búin að staðla hana m.v. meðaldurinn í hópnum. Meðalaldurinn er 46.28 og drögum við þvi 46 frá aldrinum. Það mun auðvelda túlkun á líkönum.<br />
!!! ATH af hverju deilum við með 10 og 39?.<br />
Breytan dibpat0 eru persónuleikagerðirnar, við setjum hana sem flokkabreytu (e. factor).<br />
Til þess að reikna BMI þá þurfum við að breyta hæðinni í metra og þyngdinni í kíló. Útbúum einnig flokkabreytu fyrir bmi þar sem við skiptum henni í 3 jafna hluta.</p>
<p>Í þessari úrvinnslu notum við bara þá einstaklinga sem hafa allar breyturnar sem við ætlum að skoða, aðra fjarlægjum við úr gagnasafninu.</p>
<p>Gott er að setja “label” á breyturnar til að hafa íslensku í gröfum og öðrum myndum. Notum til þess skipunina <span class="math inline">\(label\)</span> úr pakkanum <span class="math inline">\(arsenal\)</span></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="línuleg-aðhvarfsgreining.html#cb18-1"></a><span class="kw">label</span>(wcgs_dat<span class="op">$</span>cholmmol) &lt;-<span class="st"> &quot;Kólesteról&quot;</span></span>
<span id="cb18-2"><a href="línuleg-aðhvarfsgreining.html#cb18-2"></a><span class="kw">label</span>(wcgs_dat<span class="op">$</span>agec) &lt;-<span class="st"> &quot;Miðjaður Aldur&quot;</span></span>
<span id="cb18-3"><a href="línuleg-aðhvarfsgreining.html#cb18-3"></a><span class="kw">label</span>(wcgs_dat<span class="op">$</span>bmi) &lt;-<span class="st"> &quot;BMI&quot;</span></span>
<span id="cb18-4"><a href="línuleg-aðhvarfsgreining.html#cb18-4"></a><span class="kw">label</span>(wcgs_dat<span class="op">$</span>dibpat) &lt;-<span class="st"> &quot;Hegðunarhópur&quot;</span></span>
<span id="cb18-5"><a href="línuleg-aðhvarfsgreining.html#cb18-5"></a><span class="kw">label</span>(wcgs_dat<span class="op">$</span>sbp10) &lt;-<span class="st"> &quot;Blóðþrýstingur&quot;</span></span>
<span id="cb18-6"><a href="línuleg-aðhvarfsgreining.html#cb18-6"></a><span class="kw">label</span>(wcgs_dat<span class="op">$</span>ncigs0) &lt;-<span class="st"> &quot;Fjöldi sígaréttna&quot;</span></span>
<span id="cb18-7"><a href="línuleg-aðhvarfsgreining.html#cb18-7"></a><span class="kw">label</span>(wcgs_dat<span class="op">$</span>arcus0) &lt;-<span class="st"> &quot;Arcus&quot;</span>  <span class="co"># ATH!!! Hvað er arcus?</span></span></code></pre></div>
<p>Mikilvægt skref í allri tölfræðiúrvinnslu er hreinsun gagnanna, t.d. skoða hvort öll gildi séu eðlileg. Við gerum það ekki hérna en við skoðum töflu 1, helstu lýsistærðir og dreifingu gagnanna.</p>
</div>
<div id="dreifing-helstu-breytna" class="section level3" number="1.1.2">
<h3><span class="header-section-number">1.1.2</span> Dreifing helstu breytna</h3>
<p>Skoðum dreifingu þeirra breytna sem við höfum mestan áhuga á, það er kólesteról og reykingar. Gott getur verið að skoða skýribreyturnar á svipaðan hátt. Við gerð grafa notum við skipanir úr pakkanum <span class="math inline">\(tidyverse\)</span>, einnig notum við skipunina <span class="math inline">\(ggarrange\)</span> úr pakkanum <span class="math inline">\(ggpubr\)</span>.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="línuleg-aðhvarfsgreining.html#cb19-1"></a>kol &lt;-<span class="st"> </span>wcgs_dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb19-2"><a href="línuleg-aðhvarfsgreining.html#cb19-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> cholmmol)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb19-3"><a href="línuleg-aðhvarfsgreining.html#cb19-3"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">fill=</span><span class="dv">4</span>) <span class="op">+</span></span>
<span id="cb19-4"><a href="línuleg-aðhvarfsgreining.html#cb19-4"></a><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Kólesteról&quot;</span>) <span class="op">+</span></span>
<span id="cb19-5"><a href="línuleg-aðhvarfsgreining.html#cb19-5"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&#39;Kólesteról&#39;</span>, <span class="dt">y=</span><span class="st">&#39;Count&#39;</span>) <span class="op">+</span></span>
<span id="cb19-6"><a href="línuleg-aðhvarfsgreining.html#cb19-6"></a><span class="st">  </span><span class="kw">theme_bw</span>()</span>
<span id="cb19-7"><a href="línuleg-aðhvarfsgreining.html#cb19-7"></a></span>
<span id="cb19-8"><a href="línuleg-aðhvarfsgreining.html#cb19-8"></a>reyk &lt;-<span class="st"> </span>wcgs_dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb19-9"><a href="línuleg-aðhvarfsgreining.html#cb19-9"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> ncigs0)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb19-10"><a href="línuleg-aðhvarfsgreining.html#cb19-10"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">fill=</span><span class="dv">4</span>) <span class="op">+</span></span>
<span id="cb19-11"><a href="línuleg-aðhvarfsgreining.html#cb19-11"></a><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Reykingar&quot;</span>) <span class="op">+</span></span>
<span id="cb19-12"><a href="línuleg-aðhvarfsgreining.html#cb19-12"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&#39;Reykingar&#39;</span>, <span class="dt">y=</span><span class="st">&#39;Count&#39;</span>) <span class="op">+</span><span class="st">  </span></span>
<span id="cb19-13"><a href="línuleg-aðhvarfsgreining.html#cb19-13"></a><span class="st">  </span><span class="kw">theme_bw</span>()</span>
<span id="cb19-14"><a href="línuleg-aðhvarfsgreining.html#cb19-14"></a></span>
<span id="cb19-15"><a href="línuleg-aðhvarfsgreining.html#cb19-15"></a><span class="kw">ggarrange</span>(kol, reyk,<span class="dt">ncol=</span><span class="dv">2</span>, <span class="dt">nrow=</span><span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb19-16"><a href="línuleg-aðhvarfsgreining.html#cb19-16"></a><span class="st">  </span><span class="kw">annotate_figure</span>(</span>
<span id="cb19-17"><a href="línuleg-aðhvarfsgreining.html#cb19-17"></a>    <span class="dt">top =</span> <span class="kw">text_grob</span>(<span class="st">&quot;Dreifing útkomu og útsetningar&quot;</span>,<span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="dt">size =</span> <span class="dv">14</span>))</span></code></pre></div>
<p><img src="BOK_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>Oft er líka áhugavert að skoða hvernig fjórðungsmörkin eru fyrir breyturnar.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="línuleg-aðhvarfsgreining.html#cb20-1"></a>qu_chol &lt;-<span class="st"> </span><span class="kw">quantile</span>(wcgs_dat<span class="op">$</span>cholmmol)</span>
<span id="cb20-2"><a href="línuleg-aðhvarfsgreining.html#cb20-2"></a>qu_chol </span></code></pre></div>
<pre><code>##        0%       25%       50%       75%      100% 
##  2.641026  5.051282  5.717949  6.487179 16.538462</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="línuleg-aðhvarfsgreining.html#cb22-1"></a>qu_cig &lt;-<span class="st"> </span><span class="kw">quantile</span>(wcgs_dat<span class="op">$</span>ncigs0)</span>
<span id="cb22-2"><a href="línuleg-aðhvarfsgreining.html#cb22-2"></a>qu_cig</span></code></pre></div>
<pre><code>##   0%  25%  50%  75% 100% 
##    0    0    0   20   99</code></pre>
<p>Hérna sést t.d. að 50% karlmannanna er með kólesteról á bílinu 5.05 til 6.49. Einnig að langflestir reykja ekki, en 25% af karlmönnum reykja 20 sígaréttur eða meira.</p>
</div>
<div id="tafla-1" class="section level3" number="1.1.3">
<h3><span class="header-section-number">1.1.3</span> Tafla 1</h3>
<p>ATH!!! Vantar text um tilgang töflu 1.
ATH!!! Myndum við vilja hafa aðra breytu efst.
Í töflu 1 þá verður breytan sem er í hausnum að vera flokkabreyta, ef breytan sem við viljum skipta hópnum eftir er ekki flokkabreyta þá er hægt að útbúa hana með einhvers konar bilskiptingu. Hérna prófum við að skipta að kólestrólinu með fjórðungsmörkunum. Aðrar breytur geta verið hvort sem er flokkabreytur eða samfelldar.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="línuleg-aðhvarfsgreining.html#cb24-1"></a>wcgs_dat &lt;-<span class="st"> </span>wcgs_dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb24-2"><a href="línuleg-aðhvarfsgreining.html#cb24-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">chol_q =</span> <span class="kw">cut</span>(cholmmol, <span class="dt">breaks =</span> <span class="kw">quantile</span>(cholmmol, <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span><span class="op">/</span><span class="dv">4</span>)), </span>
<span id="cb24-3"><a href="línuleg-aðhvarfsgreining.html#cb24-3"></a>                      <span class="dt">include.lowest =</span> T, <span class="dt">right =</span> F))</span></code></pre></div>
<p>Til eru ýmsir skipanir til þess að gera töflu 1, sú sem við notum hérna er <span class="math inline">\(tableby\)</span> úr pakkanum <span class="math inline">\(arsenal\)</span></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="línuleg-aðhvarfsgreining.html#cb25-1"></a>tab_wcgs &lt;-<span class="st"> </span><span class="kw">tableby</span>(chol_q <span class="op">~</span><span class="st"> </span>ncigs0 <span class="op">+</span><span class="st"> </span>agec <span class="op">+</span><span class="st"> </span>bmi <span class="op">+</span><span class="st"> </span>dibpat <span class="op">+</span><span class="st"> </span>sbp10 <span class="op">+</span><span class="st"> </span>arcus0, <span class="dt">data =</span> wcgs_dat)</span>
<span id="cb25-2"><a href="línuleg-aðhvarfsgreining.html#cb25-2"></a><span class="kw">summary</span>(tab_wcgs)</span></code></pre></div>
<table>
<colgroup>
<col width="20%" />
<col width="15%" />
<col width="15%" />
<col width="15%" />
<col width="15%" />
<col width="12%" />
<col width="5%" />
</colgroup>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">[2.64,5.05) (N=775)</th>
<th align="center">[5.05,5.72) (N=776)</th>
<th align="center">[5.72,6.49) (N=802)</th>
<th align="center">[6.49,16.5] (N=787)</th>
<th align="center">Total (N=3140)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Fjöldi sígaréttna</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">9.819 (13.651)</td>
<td align="center">10.781 (14.433)</td>
<td align="center">12.399 (14.939)</td>
<td align="center">13.255 (14.679)</td>
<td align="center">11.577 (14.494)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">0.000 - 60.000</td>
<td align="center">0.000 - 80.000</td>
<td align="center">0.000 - 99.000</td>
<td align="center">0.000 - 70.000</td>
<td align="center">0.000 - 99.000</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Miðjaður Aldur</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">&lt; 0.001</td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">-0.466 (5.360)</td>
<td align="center">-0.179 (5.475)</td>
<td align="center">0.677 (5.528)</td>
<td align="center">1.041 (5.574)</td>
<td align="center">0.275 (5.517)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">-7.000 - 13.000</td>
<td align="center">-7.000 - 13.000</td>
<td align="center">-7.000 - 13.000</td>
<td align="center">-7.000 - 13.000</td>
<td align="center">-7.000 - 13.000</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"><strong>BMI</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">24.339 (2.697)</td>
<td align="center">24.333 (2.592)</td>
<td align="center">24.747 (2.526)</td>
<td align="center">24.730 (2.420)</td>
<td align="center">24.540 (2.567)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">11.202 - 38.986</td>
<td align="center">15.676 - 37.267</td>
<td align="center">16.889 - 35.763</td>
<td align="center">17.737 - 35.735</td>
<td align="center">11.202 - 38.986</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Hegðunarhópur</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.030</td>
</tr>
<tr class="odd">
<td align="left">   A</td>
<td align="center">359 (46.3%)</td>
<td align="center">387 (49.9%)</td>
<td align="center">416 (51.9%)</td>
<td align="center">421 (53.5%)</td>
<td align="center">1583 (50.4%)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   B</td>
<td align="center">416 (53.7%)</td>
<td align="center">389 (50.1%)</td>
<td align="center">386 (48.1%)</td>
<td align="center">366 (46.5%)</td>
<td align="center">1557 (49.6%)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Blóðþrýstingur</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">12.624 (1.430)</td>
<td align="center">12.726 (1.420)</td>
<td align="center">12.964 (1.540)</td>
<td align="center">13.120 (1.575)</td>
<td align="center">12.860 (1.506)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">9.800 - 21.000</td>
<td align="center">10.000 - 21.200</td>
<td align="center">10.000 - 20.800</td>
<td align="center">10.000 - 23.000</td>
<td align="center">9.800 - 23.000</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Arcus</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">&lt; 0.001</td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">0.226 (0.418)</td>
<td align="center">0.277 (0.448)</td>
<td align="center">0.323 (0.468)</td>
<td align="center">0.367 (0.482)</td>
<td align="center">0.299 (0.458)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">0.000 - 1.000</td>
<td align="center">0.000 - 1.000</td>
<td align="center">0.000 - 1.000</td>
<td align="center">0.000 - 1.000</td>
<td align="center">0.000 - 1.000</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<p>Ýmsar leiðir eru til að skoða gögnin frekar og ætlum við að sýna nokkur dæmi um það, en það er alls ekki tæmandi listi og oft gott að gera fyrir fleiri breytur en við gerum hérna.</p>
<p>Skoðum myndrænt meðaltal og staðalfrávik fjölda sígaréttna út frá kólestrólhópum. Það gerum við með “boxplotti”.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="línuleg-aðhvarfsgreining.html#cb26-1"></a>wcgs_dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb26-2"><a href="línuleg-aðhvarfsgreining.html#cb26-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span><span class="kw">as.factor</span>(chol_q),  <span class="dt">y=</span>ncigs0, <span class="dt">fill=</span><span class="kw">as.factor</span>(chol_q))) <span class="op">+</span></span>
<span id="cb26-3"><a href="línuleg-aðhvarfsgreining.html#cb26-3"></a><span class="st">  </span><span class="kw">geom_boxplot</span>() <span class="op">+</span></span>
<span id="cb26-4"><a href="línuleg-aðhvarfsgreining.html#cb26-4"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&#39;Kólesteról&#39;</span>, <span class="dt">y=</span><span class="st">&#39;Sígaréttufjöldi&#39;</span>) <span class="op">+</span></span>
<span id="cb26-5"><a href="línuleg-aðhvarfsgreining.html#cb26-5"></a><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Kólestról og reykingar&quot;</span>) <span class="op">+</span></span>
<span id="cb26-6"><a href="línuleg-aðhvarfsgreining.html#cb26-6"></a><span class="st">  </span><span class="kw">theme_bw</span>() <span class="op">+</span></span>
<span id="cb26-7"><a href="línuleg-aðhvarfsgreining.html#cb26-7"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position=</span><span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="BOK_files/figure-html/unnamed-chunk-10-1.png" width="672" />
Við sjáum að meðaltal hækkar í seinni tveimur hópunum en staðalfrávikin virðast svipuð.</p>
<p>Stundum er gott að sjá hvort það séu einhver víxláhrif á milli breytna. Skoðum því hvort áhrif sígaréttna á kólestról sé eins hjá hegðunarhópunum tveimur. Hérna notum við upphaflegu samfelldu kólesteról breytuna en skiptum sígaréttureykingum í 3 flokka: Reykja ekki, 1 pakki, meira en einn pakki.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="línuleg-aðhvarfsgreining.html#cb27-1"></a>wcgs_dat &lt;-<span class="st"> </span>wcgs_dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb27-2"><a href="línuleg-aðhvarfsgreining.html#cb27-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">ncigs0_3 =</span> <span class="kw">ifelse</span>(ncigs0 <span class="op">==</span><span class="st"> </span><span class="dv">0</span>, <span class="st">&quot;Reyklaus&quot;</span>,<span class="kw">ifelse</span>(ncigs0 <span class="op">&lt;=</span><span class="dv">20</span>,<span class="st">&quot;1 pakki&quot;</span>,<span class="st">&quot;Meira&quot;</span>)))</span>
<span id="cb27-3"><a href="línuleg-aðhvarfsgreining.html#cb27-3"></a></span>
<span id="cb27-4"><a href="línuleg-aðhvarfsgreining.html#cb27-4"></a><span class="co"># Endurröðum</span></span>
<span id="cb27-5"><a href="línuleg-aðhvarfsgreining.html#cb27-5"></a>wcgs_dat<span class="op">$</span>ncigs0_<span class="dv">3</span> &lt;-<span class="st"> </span><span class="kw">as.factor</span>(wcgs_dat<span class="op">$</span>ncigs0_<span class="dv">3</span>)</span>
<span id="cb27-6"><a href="línuleg-aðhvarfsgreining.html#cb27-6"></a>wcgs_dat<span class="op">$</span>ncigs0_<span class="dv">3</span> &lt;-<span class="st"> </span><span class="kw">relevel</span>(wcgs_dat<span class="op">$</span>ncigs0_<span class="dv">3</span>,<span class="st">&quot;1 pakki&quot;</span>)</span>
<span id="cb27-7"><a href="línuleg-aðhvarfsgreining.html#cb27-7"></a>wcgs_dat<span class="op">$</span>ncigs0_<span class="dv">3</span> &lt;-<span class="st"> </span><span class="kw">relevel</span>(wcgs_dat<span class="op">$</span>ncigs0_<span class="dv">3</span>,<span class="st">&quot;Reyklaus&quot;</span>)</span>
<span id="cb27-8"><a href="línuleg-aðhvarfsgreining.html#cb27-8"></a></span>
<span id="cb27-9"><a href="línuleg-aðhvarfsgreining.html#cb27-9"></a>wcgs_dat  <span class="op">%&gt;%</span></span>
<span id="cb27-10"><a href="línuleg-aðhvarfsgreining.html#cb27-10"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="dt">fill=</span><span class="dv">4</span>) <span class="op">+</span></span>
<span id="cb27-11"><a href="línuleg-aðhvarfsgreining.html#cb27-11"></a><span class="st">  </span><span class="kw">aes</span>(<span class="dt">x =</span> ncigs0_<span class="dv">3</span>, <span class="dt">color =</span> dibpat, <span class="dt">group =</span> dibpat, <span class="dt">y =</span> cholmmol) <span class="op">+</span></span>
<span id="cb27-12"><a href="línuleg-aðhvarfsgreining.html#cb27-12"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&#39;Fjöldi sígaréttna&#39;</span>, <span class="dt">y=</span><span class="st">&#39;Kólesteról&#39;</span>) <span class="op">+</span></span>
<span id="cb27-13"><a href="línuleg-aðhvarfsgreining.html#cb27-13"></a><span class="st">  </span><span class="kw">stat_summary</span>(<span class="dt">fun =</span> mean, <span class="dt">geom =</span> <span class="st">&quot;point&quot;</span>) <span class="op">+</span></span>
<span id="cb27-14"><a href="línuleg-aðhvarfsgreining.html#cb27-14"></a><span class="st">  </span><span class="kw">stat_summary</span>(<span class="dt">fun =</span> mean, <span class="dt">geom =</span> <span class="st">&quot;line&quot;</span>) <span class="op">+</span></span>
<span id="cb27-15"><a href="línuleg-aðhvarfsgreining.html#cb27-15"></a><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Kólesteról og reykingar&quot;</span>) <span class="op">+</span></span>
<span id="cb27-16"><a href="línuleg-aðhvarfsgreining.html#cb27-16"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">color =</span> <span class="st">&quot;Hegðunarhópur&quot;</span>) <span class="op">+</span></span>
<span id="cb27-17"><a href="línuleg-aðhvarfsgreining.html#cb27-17"></a><span class="st">  </span><span class="kw">theme_bw</span>()</span></code></pre></div>
<p><img src="BOK_files/figure-html/unnamed-chunk-11-1.png" width="672" />
Sjáum að hóparnir tveir koma ekki alveg eins út. Um þá sem reykja ekki gildir að, þeir sem eru í hegðunarhópi A er kólesterólið mun hærra en þegar við skoðum þá sem reykja 1 pakka á dag eða minna þá minnkar munurinn. Svo frá einum pakka og yfir í meira þá stendur hópur B í stað en hópur A hækkar og bilið á milli þeirra eykst. Svo víxláhrif virðast til staðar.</p>
</div>
</div>
<div id="líkanagerð" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Líkanagerð</h2>
</div>
<div id="emmeans" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Emmeans</h2>
</div>
</div>
            </section>

          </div>
        </div>
      </div>

<a href="tvíkosta-aðhvarfsgreining.html" class="navigation navigation-next navigation-unique" aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["BOK.pdf", "BOK.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
